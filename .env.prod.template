# Chiro ERP Production Environment Configuration
# Copy this file to .env.prod and customize with your production values
# IMPORTANT: Use secure passwords and configure proper secrets management

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DB_NAME=chiro_erp_prod
DB_USERNAME=chiro_prod
DB_PASSWORD=CHANGE_ME_SECURE_PASSWORD_2025
DB_HOST=postgres
DB_PORT=5432

# Connection pool settings (optimized for production)
DB_MIN_SIZE=10
DB_MAX_SIZE=50
DB_IDLE_TIMEOUT=600
DB_MAX_LIFETIME=1800

# =============================================================================
# KAFKA CONFIGURATION
# =============================================================================
KAFKA_BOOTSTRAP_SERVERS=kafka:29092
KAFKA_CONSUMER_GROUP_ID=chiro-erp-prod
KAFKA_REPLICATION_FACTOR=3
KAFKA_MIN_IN_SYNC_REPLICAS=2

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD
REDIS_DATABASE=0
REDIS_CLUSTER_ENABLED=false

# =============================================================================
# API GATEWAY CONFIGURATION
# =============================================================================
API_GATEWAY_PORT=80
API_GATEWAY_SSL_PORT=443

# Service URLs (internal communication)
CORE_BUSINESS_SERVICE_URL=http://core-business-service:8080
OPERATIONS_SERVICE_URL=http://operations-management-service:8081
CUSTOMER_RELATIONS_SERVICE_URL=http://customer-relations-service:8082
PLATFORM_SERVICES_URL=http://platform-services:8083
WORKFORCE_SERVICE_URL=http://workforce-management-service:8084

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
GRAFANA_PASSWORD=CHANGE_ME_GRAFANA_PASSWORD

# Retention policies
PROMETHEUS_RETENTION_TIME=30d
PROMETHEUS_RETENTION_SIZE=10GB

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Logging levels (production)
QUARKUS_LOG_LEVEL=WARN
ROOT_LOG_LEVEL=ERROR

# Production settings
QUARKUS_PROFILE=prod
QUARKUS_DEV_SERVICES_ENABLED=false
QUARKUS_LIVE_RELOAD_ENABLED=false

# CORS settings (restrict to your domains)
QUARKUS_HTTP_CORS=true
QUARKUS_HTTP_CORS_ORIGINS=https://your-domain.com,https://api.your-domain.com

# Security (production)
QUARKUS_SECURITY_USERS_EMBEDDED_ENABLED=false

# JWT/OIDC Configuration
QUARKUS_OIDC_AUTH_SERVER_URL=https://your-auth-server.com/auth/realms/chiro-erp
QUARKUS_OIDC_CLIENT_ID=chiro-erp-prod
QUARKUS_OIDC_CREDENTIALS_SECRET=CHANGE_ME_OIDC_SECRET

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
SSL_CERTIFICATE_PATH=/etc/ssl/certs/chiro-erp.crt
SSL_PRIVATE_KEY_PATH=/etc/ssl/private/chiro-erp.key
SSL_CIPHER_SUITES=ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================

# Docker build settings
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1

# Resource limits for production
COMPOSE_HTTP_TIMEOUT=120
COMPOSE_PROJECT_NAME=chiro-erp-prod

# =============================================================================
# PRODUCTION FEATURES
# =============================================================================

# Disable debug features
ENABLE_DEBUG=false
DEBUG_SUSPEND=false

# Production database settings
ENABLE_DB_LOGGING=false
HIBERNATE_SHOW_SQL=false
HIBERNATE_FORMAT_SQL=false

# Cache settings (aggressive caching for production)
CACHE_TTL=3600
CACHE_MAX_SIZE=10000

# =============================================================================
# EXTERNAL SERVICES (Production)
# =============================================================================

# Email service
EMAIL_SERVICE_ENABLED=true
EMAIL_SMTP_HOST=smtp.your-provider.com
EMAIL_SMTP_PORT=587
EMAIL_SMTP_USERNAME=noreply@your-domain.com
EMAIL_SMTP_PASSWORD=CHANGE_ME_EMAIL_PASSWORD
EMAIL_SMTP_TLS=true

# File storage (S3 or similar)
FILE_STORAGE_TYPE=s3
FILE_STORAGE_BUCKET=chiro-erp-prod-files
FILE_STORAGE_REGION=us-east-1
FILE_STORAGE_ACCESS_KEY=CHANGE_ME_AWS_ACCESS_KEY
FILE_STORAGE_SECRET_KEY=CHANGE_ME_AWS_SECRET_KEY

# Notification service
NOTIFICATION_SERVICE_ENABLED=true
NOTIFICATION_WEBHOOK_URL=https://hooks.your-domain.com/notifications
NOTIFICATION_API_KEY=CHANGE_ME_NOTIFICATION_API_KEY

# =============================================================================
# PERFORMANCE SETTINGS (Production)
# =============================================================================

# Optimized timeouts
HTTP_TIMEOUT=30000
DB_QUERY_TIMEOUT=15000
KAFKA_CONSUMER_TIMEOUT=5000

# JVM settings for production
JAVA_OPTS_EXTRA=-Xmx2g -Xms1g -XX:+UseG1GC -XX:MaxGCPauseMillis=200

# Connection pool settings
HTTP_CLIENT_MAX_CONNECTIONS=100
HTTP_CLIENT_MAX_CONNECTIONS_PER_ROUTE=20

# =============================================================================
# BACKUP AND DISASTER RECOVERY
# =============================================================================

# Database backup settings
DB_BACKUP_ENABLED=true
DB_BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
DB_BACKUP_RETENTION_DAYS=30
DB_BACKUP_S3_BUCKET=chiro-erp-backups

# Application backup settings
APP_BACKUP_ENABLED=true
APP_BACKUP_SCHEDULE=0 3 * * 0  # Weekly on Sunday at 3 AM

# =============================================================================
# COMPLIANCE AND AUDIT
# =============================================================================

# Audit logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_LEVEL=INFO
AUDIT_LOG_RETENTION_DAYS=365

# GDPR compliance
GDPR_ENABLED=true
DATA_RETENTION_POLICY_DAYS=2555  # 7 years

# =============================================================================
# RATE LIMITING AND SECURITY
# =============================================================================

# Rate limiting (requests per minute per IP)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=1000
RATE_LIMIT_BURST_SIZE=100

# Security headers
SECURITY_HEADERS_ENABLED=true
HSTS_MAX_AGE=31536000
CSP_POLICY="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'"

# =============================================================================
# ALERTING AND NOTIFICATIONS
# =============================================================================

# Alert manager configuration
ALERTMANAGER_ENABLED=true
ALERTMANAGER_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
ALERTMANAGER_EMAIL_TO=ops@your-domain.com
ALERTMANAGER_EMAIL_FROM=alerts@your-domain.com

# Health check settings
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_FAILURE_THRESHOLD=3
